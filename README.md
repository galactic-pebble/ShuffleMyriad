# Card Game Simulator - ShuffleMyriad -

カードゲーム用のデジタルプレイマットシミュレーターです。デッキを読み込んでカードを配置・操作し、Discordなどの画面共有機能を使って対戦相手とプレイできます。

## 特徴

- **デュアルウィンドウ表示**: メインウィンドウの他に画面共有専用の対戦相手用ウィンドウを表示
- **柔軟なカード操作**: ドラッグ&ドロップ、回転、表裏切り替え
- **デッキ管理**: シャッフル、ドロー、デッキ内検索
- **ゲーム補助機能**: ライフポイント管理、ダイス、コイントス
- **マーカー機能**: テキスト付きマーカーでゲーム状況を記録
- **盤面保存**: ゲーム状況の保存・復元

## 必要な環境

- Python 3.7以上
- 必要なライブラリ（下記参照）

## インストール

### 1. リポジトリのクローン
```bash
git clone https://github.com/yourusername/ShuffleMyriad_Simulator.git
cd ShuffleMyriad_Simulator
```

### 2. 必要なライブラリのインストール
```bash
pip install tkinter pillow
```

### 3. 実行
```bash
python ShuffleMyriad_Simulator.py
```

## フォルダ構成

```
ShuffleMyriad_Simulator/
├── ShuffleMyriad_Simulator.py  # メインプログラム
├── resource/                            # リソースフォルダ
│   ├── playmat.png                      # プレイマット画像
│   ├── reverse.png                      # カード裏面画像
│   ├── noimage.png                      # 画像なしカード用
│   └── unknown.png                      # 非公開カード用
├── card-img/                            # カード画像フォルダ
│   ├── card001.png                      # カード画像（例）
│   └── ...
├── CardList.txt                         # カードリスト（後述）
├── config.txt                           # 設定ファイル（オプション）
└── README.md                            # このファイル
```

## セットアップ

### 1. カード画像の準備
- `card-img/` フォルダにカード画像を配置
- ファイル名は `{カードID}.png` 形式
- 推奨サイズ: 78×111px（自動リサイズされます）

### 2. カードリストファイル（CardList.txt）
```
card001,カード名1,0
card002,カード名2,1
card003,カード名3,0
```
形式: `カードID,表示名,EX値`（EX値: 0=通常, 1=EX, 2以上=制限）

### 3. デッキファイルの作成
```
card001
card002
card001
[EX]
card003
[Resource]
reverse.png
playmat.png
```
- 通常デッキ → `[EX]` → EXデッキ → `[Resource]` → リソース画像名

### 4. リソース画像の準備
- `resource/playmat.png`: プレイマット背景（960×720px推奨）
- `resource/reverse.png`: カード裏面（78×111px推奨）
- `resource/noimage.png`: 画像なしカード用
- `resource/unknown.png`: 非公開カード用（390×555px推奨）

## 使用方法

### 基本操作

#### カード操作
- **選択**: 左クリック
- **移動**: ドラッグ&ドロップ
- **回転**: 右クリック
- **表裏切り替え**: 選択後「リバース」ボタン
- **削除**: カード選択後 `Delete` キー

#### デッキ操作
- **デッキロード**: 「デッキをロード」ボタン
- **シャッフル**: 「シャッフル」ボタン
- **ドロー**: 「ドロー」ボタン（デッキトップから1枚）
- **デッキ内容確認**: 「デッキの中身を見る」ボタン

#### ゲーム補助機能
- **ライフポイント**: 左下のスピンボックスで管理（0-999999）
- **ダイス**: 「6面ダイス」ボタン（1-6のランダム）
- **コイントス**: 「コイントス」ボタン（表/裏）

### 高度な機能

#### マーカー
1. 「マーカーを追加」で半透明マーカーを配置
2. マーカーをダブルクリックでテキスト編集
3. ライフカウンターや特殊効果の記録に使用

#### キーボードショートカット
- `Ctrl + T`: 選択カードをデッキトップに戻す
- `Ctrl + B`: 選択カードをデッキボトムに戻す
- `Ctrl + F`: 選択カードを最前面に移動
- `Ctrl + R`: 選択カードを最背面に移動
- `Ctrl + C`: 選択カードのIDをクリップボードにコピー
- `Delete`: 選択オブジェクトを削除

#### 盤面の保存・復元
- **保存**: 「盤面のセーブ」で現在の状態を保存
- **読み込み**: 「盤面のロード」で以前の状態を復元
- カード位置、状態、ライフポイント、マーカーすべて保存

### 対戦相手ウィンドウ
- 自動的に開かれる対戦相手視点のウィンドウ
- メイン画面が180度回転して表示
- 相手のライフポイントとデッキ枚数を表示
- Y座標440以下のカードは相手から見て裏向きに表示

## 設定ファイル（config.txt）

```
opponent_refresh_rate=120
```
- `opponent_refresh_rate`: 対戦相手ウィンドウの更新間隔（ミリ秒）

## ガチャ機能

「100連ガチャ」ボタンで自動デッキ生成：
- CardList.txtから100枚ランダム選択
- EX値2以上は自動的に再抽選
- EX値0（通常）とEX値1（EX）で自動分類
- タイムスタンプ付きファイルで保存

## トラブルシューティング

### よくある問題

**Q: 「CardList.txtが見つかりません」エラー**
A: カードリストファイルを作成してルートディレクトリに配置してください

**Q: カード画像が表示されない**
A: `card-img/` フォルダに正しい名前（`{カードID}.png`）で画像を配置してください

**Q: 対戦相手ウィンドウが表示されない**
A: メインウィンドウの起動後、自動的に背面に表示されます。タスクバーを確認してください

### パフォーマンス調整

**重い場合の対処**:
1. `config.txt` で更新頻度を下げる（数値を大きく）
2. 大きすぎる画像サイズを縮小
3. 同時に開くウィンドウ数を制限

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 貢献

バグ報告や機能提案は Issues でお知らせください。プルリクエストも歓迎します。

## 更新履歴

### v1.0.0
- 初回リリース
- 基本的なカード操作機能
- デュアルウィンドウ表示
- デッキ管理機能

---

**注意**: このシミュレーターは個人的な使用を目的としています。商用利用や特定のカードゲームの著作権には十分ご注意ください。
